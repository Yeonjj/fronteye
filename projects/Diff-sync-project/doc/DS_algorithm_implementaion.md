## 쉐도우의 필요성

비동기적이라함은 네트워크상의 요청에대한 응답을 기다리는 동안 사용자의 입력을 허용하는 것이다. 즉 다른 사용자가 서버의 텍스트를 바꾸는 중이더라도 여전히 입력이 가능한 것이다. 3-way-merge는 merge가 일어나는 동안 사용자가 수정을 하는 경우 자신의 수정사항을 모두 잃어버린다. 동기적으로 동작하기 때문이다. 따라서 이를 방지하기 위해서 필연적으로 사용자와 중앙 merge서버와 동기할 때 이전에 수정이 이루어졌나 다시 비교할 수있는 방법이 필요하게 된다. 이를 모두 비동기적으로 수행하기 위해서는 반드시 쉐도우가 필요하다. 왜냐하면 사용자입장에서 계속 서버에 입력을 해야하는데 기본적으로 서버는 모든 패킷을 한번에 하나만 처리할 수있다. 따라서 사용자가 임시로 계속해서 수정사항을 쉐도우에 입력하는 동한 다른 사용자도 쉐도우에 입력을 계속 할 수있다. 즉, 쉐도우는 수정본이 아닌 원본의 쉐도우라고 생각하는 것이 맞을 것이다.

## 구현 

keyup 이벤트 발생시 모든 과정 실행

1. client 수정 실행 

수정되는 element에 keyup이벤트 헨들러 할당

2. common shadow와 diff. 

new text는 client. old text는 shadow이다. 

3. diff결과를 common shadow에 저장. 

이때 diff객체의 added된 결과와 수정이 이루어지지않은 text들 모두 출력. 

4. diff결과를 server에 patch.

이때 다른 사용자에 의해 server가 달라진경우 
